<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Product Purchase Form</title>
  <style>
    body { font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif; margin: 0; background: #0e2233; color: #e6f0f7; }
    header { padding: 24px; background: #0b1926; border-bottom: 1px solid #163349; }
    h1 { margin: 0; font-weight: 600; font-size: 22px; }
    main { max-width: 860px; margin: 28px auto; padding: 0 16px; }
    .panel { background: #0f2740; border: 1px solid #1b3c58; border-radius: 12px; padding: 20px; }
    label { display: block; margin: 14px 0 6px; font-size: 14px; color: #b9d5ea; }
    input, select { width: 100%; padding: 12px; border: 1px solid #244a69; border-radius: 8px; background: #0b1f33; color: #e6f0f7; }
    .row { display: grid; grid-template-columns: 1fr 1fr; gap: 14px; }
    button { margin-top: 18px; background: #2fb47c; color: #062017; border: 0; border-radius: 10px; padding: 12px 16px; font-weight: 700; cursor: pointer; }
    button:hover { background: #28a36f; }
    .note { margin-top: 6px; color: #9dc2d9; font-size: 12px; }
  </style>
</head>
<body>
  <header><h1>Product Purchases</h1></header>
  <main>
    <div class="panel">
      <div class="row">
        <div>
          <label>Category</label>
          <select id="category">
            <option value="Clothing">Clothing</option>
            <option value="Phones">Phones</option>
            <option value="Computers">Computers</option>
            <option value="Home">Home</option>
          </select>
        </div>
        <div>
          <label>Product Name</label>
          <input id="productName" placeholder="Jacket" />
        </div>
      </div>

      <div class="row">
        <div>
          <label>Price Per Unit</label>
          <input id="pricePerUnit" type="number" step="0.01" placeholder="189" />
        </div>
        <div>
          <label>Customer Name</label>
          <input id="customerName" placeholder="Jane Doe" />
        </div>
      </div>

      <div class="row">
        <div>
          <label>Customer Id</label>
          <input id="customerId" placeholder="uuid-or-customer-id" />
        </div>
        <div>
          <label>Product Id</label>
          <input id="productId" placeholder="uuid-or-product-id" />
        </div>
      </div>

      <button id="send">➕ Push Product Purchase Record to Queue</button>
      <div class="note">This will call your API Gateway (Lambda #2) which enqueues to SQS, then Lambda #1 writes to DynamoDB.</div>
    </div>
  </main>

  <script>
    // ── Replace these two with your real values ───────────────────────────────
    const API_BASE = '{APIGW_BASE_URL}'; // e.g., https://abc123.execute-api.us-east-1.amazonaws.com
    const API_PATH = '{APIGW_PATH}';     // e.g., /dev/productpurchase
    // ─────────────────────────────────────────────────────────────────────────

    const TITLE = 'Product Purchase Form';

    function dialog(msg) {
      alert(`${TITLE}\n\n${msg}`);
    }

    async function send() {
      const body = {
        Category: document.getElementById('category').value,
        ProductName: document.getElementById('productName').value,
        PricePerUnit: Number(document.getElementById('pricePerUnit').value),
        CustomerName: document.getElementById('customerName').value,
        CustomerId: document.getElementById('customerId').value,
        ProductId: document.getElementById('productId').value,
        TimeOfPurchase: new Date().toISOString(),
      };

      try {
        const res = await fetch(`${API_BASE}${API_PATH}`, {
          method: 'PUT',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify(body),
        });
        if (!res.ok) {
          const t = await res.text();
          dialog(`Failed to add Product Purchase.\nStatus: ${res.status}\n${t}`);
          return;
        }
        dialog('Product Purchase added successfully!');
      } catch (err) {
        dialog(`Error:\n${err?.message || String(err)}`);
      }
    }

    document.getElementById('send').addEventListener('click', send);
  </script>
</body>
</html>
